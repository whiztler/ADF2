/*********************************************************************************
 _____ ____  _____ 
|  _  |    \|   __|
|     |  |  |   __|
|__|__|____/|__|   
ARMA Mission Development Framework
ADF version: 2.00 / MARCH 2016

Script: Mission init / Init reporting
Author: Whiztler
Script version: 1.20

File: ADF_init_rpt.sqf
**********************************************************************************
DO NOT edit this file. To set-up and configure your mission, edit the files in
the  'mission\1-config\'  folder.
*********************************************************************************/

ADF__ERPT("ADF_init_rpt.sqf");

// Init
private _m	= "";
private _msg	= "";
private _hc	= count (entities "HeadlessClient_F");
private _ai	= count (allUnits - allPlayers);
if (_ai < 0) then {_ai = 0};

ADF__MODSP(ADF_mod_CBA,"CBA A3")
ADF__MODSP(ADF_mod_ACRE,", ACRE2")
ADF__MODSP(ADF_mod_TFAR,", TFAR")
ADF__MODSP(ADF_mod_CTAB,", cTab")
ADF__MODSP(ADF_mod_ACE3,", ACE3")
ADF__MODSP(ADF_mod_Ares,", Ares")
ADF__MODSP(ADF_mod_CSAT,", TEC CSAT")
ADF__MODSP(ADF_mod_RHS,", RHS")
ADF__MODSP(ADF_mod_JR,", ASDG JR")
ADF__MODSP(ADF_mod_HLCW,", HLC Weapons")
ADF__MODSP(ADF_mod_AIA,", AiATP")
ADF__MODSP(ADF_mod_CUP_T,", CUP Terrains")
ADF__MODSP(ADF_mod_CUP_W,", CUP Weapons")
ADF__MODSP(ADF_mod_CUP_U,", CUP Units")
ADF__MODSP(ADF_mod_CUP_V,", CUP Vehicles")

// Init reporting
if (ADF_debug) then {
	diag_log "--------------------------------------------------------------------------------------";
	_msg = format ["Init - ADF version: %1",ADF_tpl_version];
	[_msg, false] call ADF_fnc_log;
	_msg = format ["Init - Mission version: %1",ADF_mission_version];
	[_msg, false] call ADF_fnc_log;
	_msg = format ["Init - Number of players connected: %1", count allPlayers];
	[_msg, false] call ADF_fnc_log;
	_msg = format ["Init - Number of HC's connected: %1", _hc];
	[_msg, false] call ADF_fnc_log;	
	_msg = format ["Init - Number of AI's active: %1", _ai];
	[_msg, false] call ADF_fnc_log;
	diag_log "--------------------------------------------------------------------------------------";
} else { // Live mission logging
	diag_log ""; diag_log "";
	diag_log "--------------------------------------------------------------------------------------";
	diag_log format ["ADF RPT: Init - ADF version: %1", ADF_tpl_version];
	diag_log "--------------------------------------------------------------------------------------";
	diag_log format ["ADF RPT: Init - Mission version: %1", ADF_mission_version];
	diag_log format ["ADF RPT: Init - Mission name: %1", (getText (missionConfigFile >> "overviewText"))];
	diag_log format ["ADF RPT: Init - Mission developer: %1", (getText (missionConfigFile >> "author"))];
	diag_log "--------------------------------------------------------------------------------------";
	diag_log format ["ADF RPT: Init - Number of players connected: %1", count allPlayers];
	diag_log format ["ADF RPT: Init - Number of HC's connected: %1", _hc];
	diag_log "--------------------------------------------------------------------------------------";
	diag_log format ["ADF RPT: Init - Number of AI's active: %1", _ai];
	diag_log "--------------------------------------------------------------------------------------";
	diag_log format ["ADF RPT: Init - ADF autodetect addons active: %1", _m];
	diag_log "--------------------------------------------------------------------------------------";
	diag_log "ADF_debug mode is disabled (set to 'false'). To debug missions please enable ADF_debug";
	diag_log "by setting 'ADF_debug = true' in the 'ADF_init_config.sqf'";
	diag_log "--------------------------------------------------------------------------------------";
	diag_log ""; diag_log "";
};

// Server FPS reporting in RPT. The frequency of the reporting is based on server performance.
if (ADF_Log_ServerPerfEnable) then {[60, "Server", "Server"] spawn ADF_fnc_statsReporting};