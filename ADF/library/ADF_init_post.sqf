/*********************************************************************************
 _____ ____  _____ 
|  _  |    \|   __|
|     |  |  |   __|
|__|__|____/|__|   
ARMA Mission Development Framework
ADF version: 2.00 / MARCH 2016

Script: Mission initialization countdown timer
Author: Whiztler
Script version: 1.50

File: ADF_init_post.sqf
**********************************************************************************
DO NOT edit this file. To set-up and configure your mission, edit the files in
the  'mission\1-config\'  folder.
*********************************************************************************/

diag_log "ADF RPT: Init - executing ADF_init_post.sqf"; // Reporting. Do NOT edit/remove

if (ADF_debug) then {
	{
		private _m = "DIAG - Script executed: " + str _x;
		[_m, false] call ADF_fnc_log;
	} forEach diag_activeSQFScripts;
};

// Init
ADF__P5(_t,_vt,_vm,_db,_dn);
private _u 	= player;
private _c	= 0;
_t 	= _t / 100;


if (time > 300) exitWith {ADF_missionInit = true;};
if (ADF_debug) exitWith {ADF_missionInit = true; publicVariable "ADF_missionInit"; ADF__RPTLOG("ADF RPT: INIT - debug mode detected, skipping mission init timer")};
if (isMultiplayer) then {_u enableSimulation false; showMap false;};

If ((_db == "Alpha") || (_db == "Beta")) then {
	private _m = format ["This is a development build of ADF (%1 - %2 %3). Do not use for live missions!", _vt, _db, _dn];
	_m remoteExec ["systemChat", -2, false];
};
		
while {(_c != 100)} do {
	_c = _c + 1;	
	private _m = format ["<br/><t align='left' size='1.1' color='#A1A4AD'>Mission Initializing: </t><t size='1.1' align='left' color='#F7D358' font='PuristaBold'>%1&#0037;</t><t size='1.1' align='left' color='#A1A4AD'> done</t><br/><br/><t align='left' color='#A1A4AD'>- Refrain from moving!</t><br/><t align='left' color='#A1A4AD'>- Do not use your radio!</t><br/><t align='left' color='#A1A4AD'>- Follow TL orders</t><br/><t align='left' color='#A1A4AD'>- Init takes approx %2 secs</t><br/><br/><t align='left' color='#A1A4AD'>Tpl: <t color='#FFFFFF' align='left'>%3</t>  |  Mission: </t><t color='#FFFFFF' align='left'>%4</t><br/>", _c, _t * 100, _vt, _vm];

	If ((_db == "Alpha") || (_db == "Beta")) then {
		_m = _m + format ["
			<t align='left' color='#A1A4AD'>Build: <t color='#FFFFFF' align='left'>%1</t>  |  Build version: </t><t color='#FFFFFF' align='left'>%2</t><br/>
		", _db, _dn];
	};
	
	sleep _t;
	hintSilent parseText _m; 
};

if (isMultiplayer) then {_u enableSimulation true; showMap true;};

private _m = format ["<br/><t size='1.1' color='#FFFFFF' align='left'>Mission initializing complete</t><t size='1' align='left' color='#A1A4AD'><br/><br/>- Refrain from moving!<br/>- Do not use your radio!<br/>- Follow TL orders<br/>- Init takes approx %1 secs<br/><br/>Tpl: %2  |  Mission: %3</t><br/><br/>", _t * 100, _vt, _vm];

If ((_db == "Alpha") || (_db == "Beta")) then {
	_m = _m + format ["
		<t align='left' color='#A1A4AD'>Build: %1 | Build version: %2</t><br/>
	", _db, _dn];
};

hintSilent parseText _m;
finishMissionInit;
sleep 3; hintSilent "";
ADF_missionInit = true; 
ADF__DBGVAR("ADF Debug: INIT - ADF_missionInit = true")

